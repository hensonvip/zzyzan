!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/assets/",t(0)}([function(e,t,n){n(24)(),n(29)(),n(28)(),n(27)(),n(23)(),n(30)(),n(31)(),n(26)(),n(14)(),n(15)(),n(19)(),n(16)(),n(36)(),n(17)(),n(11).init(),n(20)(),n(21)(),n(22)(),n(42)(),n(43)(),n(45)(),n(38)(),n(51)(),n(50)(),n(18)()},function(e,t){e.exports=function(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&e()})}},function(e,t){e.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=t.length,a={},r="",o=0,i=0,s=0,c=0,l=Object.prototype.toString,u=!0;for(s=0;n>s;s++)if("[object Array]"!==l.call(t[s])){u=!1;break}if(u){for(u=[],s=0;n>s;s++)u=u.concat(t[s]);return u}for(s=0,c=0;n>s;s++)if(e=t[s],"[object Array]"===l.call(e))for(i=0,o=e.length;o>i;i++)a[c++]=e[i];else for(r in e)e.hasOwnProperty(r)&&(parseInt(r,10)+""===r?a[c++]=e[r]:a[r]=e[r]);return a}},function(e,t,n){var a=n(9),r=n(4),o={},i=document;e.exports=function(e,t,n){function s(e){o.$c.innerHTML='<b class="number">'+e+"</b>"}function c(){o.$t_container.classList.remove("show")}o||(o={}),o.si||(o.si=!1),o.$t_container||(o.$c=i.createElement("i"),o.$c.setAttribute("class","btn-close fa fa-times fa-fw"),o.$t_container=i.createElement("div"),o.$t_container.id="ajax-loading-container",o.$t=i.createElement("div"),o.$t.id="ajax-loading",o.$t_container.appendChild(o.$t),o.$t_container.appendChild(o.$c),i.body.appendChild(o.$t_container),o.$c.addEventListener(r,function(){c(),clearInterval(o.si)})),clearInterval(o.si),n>0?(s(n),o.si=setInterval(function(){n--,s(n),0>=n&&(c(),o.$c.innerHTML="",o.si&&clearInterval(o.si))},1e3)):o.$c.innerHTML="","hide"===e?c():(setTimeout(function(){o.$t_container.className=e+" show"},1),o.$t.innerHTML=a(e,t))}},function(e,t){e.exports="touchend"in document.documentElement?"touchend":"click"},function(e,t){e.exports=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}},function(e,t){e.exports=function(e){"use strict";function t(){r=window.pageYOffset,n()}function n(){o||(requestAnimationFrame(a),o=!0)}function a(){e(r),o=!1}var r=window.pageYOffset,o=!1;window.addEventListener("scroll",t)}},function(e,t){e.exports=function(e){for(var t=e.offsetTop,n=e.offsetParent;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t}},function(e,t){e.exports=function(e,t){var n=function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},a=function(e,t,a,r){return a>r?t:e+(t-e)*n(a/r)},r=function(t,n,r,o){n=n||500,o=o||window;var i=window.pageYOffset,s=parseInt(e),c=+new Date,l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,15)},u=function(){var e=+new Date-c;o!==window?o.scrollTop=a(i,s,e,n):window.scroll(0,a(i,s,e,n)),e>n?"function"==typeof r&&r(t):l(u)};u()};r(e)}},function(module,exports){module.exports=function(){var defaults=["type","size","content","wrapper"],types=["loading","success","error","question","info","ban","warning"],sizes=["small","middle","large"],wrappers=["div","span"],type,icon,size,wrapper,content,args=arguments;switch(args.length){case 0:return!1;case 1:content=args[0];break;case 2:type=args[0],content=args[1];break;default:for(var i in args)eval(defaults[i]+" = args[i];")}switch(type||(type=types[0]),size||(size=sizes[0]),wrapper||(wrapper=wrappers[0]),type){case"success":icon="check-circle";break;case"error":icon="times-circle";break;case"info":case"warning":icon="exclamation-circle";break;case"question":case"help":icon="question-circle";break;case"ban":icon="minus-circle";break;case"loading":case"spinner":icon="circle-o-notch fa-spin";break;default:icon=type}return"<"+wrapper+' class="tip-status tip-status-'+size+" tip-status-"+type+'"><i class="fa fa-'+icon+' fa-fw"></i> '+content+"</"+wrapper+">"}},function(e,t,n){var a=n(3);e.exports=function(){this.process_url=!1,this.loading_tx=!1,this.error_tx="Sorry, the server is busy, please try again later.",this.$fm=!1,this.done_close=!1,this.done=function(){},this.before=function(){},this.always=function(){},this.fail=function(){};var e=this,t={};this.init=function(){e.$fm.addEventListener("submit",n.init,!1)};var n={init:function(){t.$submit||(t.$submit=e.$fm.querySelector(".submit"),t.submit_ori_tx=t.$submit.innerHTML,t.submit_loading_tx=e.loading_tx?e.loading_tx:t.$submit.getAttribute("data-loading-text")),t.$submit.innerHTML=t.submit_loading_tx,t.$submit.setAttribute("disabled",!0),a("loading",t.submit_loading_tx);var n=new XMLHttpRequest;fd=new FormData(e.$fm),fd.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),e.before(fd),n.open("POST",e.process_url),n.send(fd),n.onload=function(){if(n.status>=200&&n.status<400){var r;try{r=JSON.parse(n.responseText)}catch(o){r=n.responseText}if(r&&r.status){if("success"===r.status)e.done_close?a(r.status,r.msg,e.done_close):a(r.status,r.msg);else if("error"===r.status){if(a(r.status,r.msg),r.code&&-1!==r.code.indexOf("pwd")){var i=e.$fm.querySelector("input[type=password]");i&&i.select()}else if(r.code&&-1!==r.code.indexOf("email")){var s=e.$fm.querySelector("input[type=email]");s&&s.select()}t.$submit.removeAttribute("disabled")}t.$submit.innerHTML=t.submit_ori_tx,e.done(r)}else a("error",e.error_tx),t.$submit.removeAttribute("disabled"),t.$submit.innerHTML=t.submit_ori_tx,e.fail(r);e.always(r)}},n.onerror=function(){a("error",e.error_tx),t.$submit.removeAttribute("disabled"),t.$submit.innerHTML=t.submit_ori_tx,e.fail()}}};return this}},function(e,t,n){function a(){function e(e){e.preventDefault(),f.$as[1].click()}if(f.$nagi){var t=f.$post_content.querySelectorAll("a > img"),n=t.length;if(0!=n)for(var a=0;n>a;a++){var r=t[a].parentNode;r.href="javascript:;",r.addEventListener(d,e)}}}function r(){function e(e){return f.post_contents&&f.post_contents[e]?f.post_contents[e]:!1}function t(e,t){f.post_contents||(f.post_contents=[]),f.post_contents[e]=t}function n(e){f.$post_content.innerHTML=e}function r(){return f.$current==f.$next?g.page+1:g.page-1}function o(t){if(t.preventDefault(),f.$current=this,p())return i("warning",g.lang.M03,3),!1;if(_())return i("warning",g.lang.M04,3),!1;if(e(r()))return n(e(r())),m(),u(),void a();i("loading",window.THEME_CONFIG.lang.M01);var o=new XMLHttpRequest;o.open("get",g.process_url+"&page="+r()),o.send(),o.onload=function(){if(o.status>=200&&o.status<400){var e;try{e=JSON.parse(o.responseText)}catch(t){e=o.responseText}e&&e.status?s(e):l(e)}else l()},o.onerror=function(){l()}}function s(e){"success"===e.status?(t(r(),e.content),n(e.content),m(),u(),a(),i("hide")):"error"===e.status&&i(e.status,e.msg)}function l(e){e?i("error",e):i("error",g.lang.E01)}function u(){var e=g.url_tpl.replace(9999,g.page);history.replaceState(null,null,e),c(f.post_top)}function m(){g.page=r(),f.$next_number.innerHTML=g.page,f.$prev_number.innerHTML=g.page}function p(){return f.$current==f.$prev&&1==g.page}function _(){return f.$current==f.$next&&g.page==g.numpages}if(f.$nagi){f.$post_content=document.querySelector(".entry-content"),f.$as=f.$nagi.querySelectorAll("a");for(var v=0,h=f.$as.length;h>v;v++)f.$as[v].addEventListener(d,o);t(g.page,f.$post_content.innerHTML)}}function o(){return window.THEME_CONFIG.theme_page_nagination_ajax?void u(function(){_.init(),r(),a()}):!1}var i=n(3),s=n(2),c=n(8),l=n(6),u=n(1),d=n(4),m=n(7),p=n(12),f={},g={process_url:"",post_id:"",numpages:"",url_tpl:"",page:1,lang:{M01:"Loading, please wait...",M02:"Content loaded.",M03:"Already first page.",M04:"Already last page.",E01:"Sorry, some server error occurred, the operation can not be completed, please try again later."}};g=s(g,window.THEME_CONFIG.theme_page_nagination_ajax);var _={init:function(){var e=this;f.$post=document.querySelector(".singular-post"),f.$nagi=document.querySelector(".page-pagination"),f.$next=f.$nagi.querySelector(".next"),f.$prev=f.$nagi.querySelector(".prev"),f.$next_number=f.$next.querySelector(".current-page"),f.$prev_number=f.$prev.querySelector(".current-page"),f.$post&&f.$nagi&&(f.last_scroll_y=window.pageYOffset,f.ticking=!1,f.post_top,f.max_bottom,f.is_hide=!1,window.addEventListener("resize",function(){e.reset_nagi_style()}),this.bind())},bind:function(e){e===!0&&(f.$nagi=document.querySelector(".page-pagination")),this.reset_nagi_style(),this.bind_scroll()},reset_nagi_style:function(){f.post_top=m(f.$post),f.post_height=f.$post.querySelector(".entry-body").clientHeight,f.max_bottom=f.post_top+f.post_height,f.$nagi.style.left=p(f.$post)+"px",f.$nagi.style.width=f.$post.clientWidth+"px"},bind_scroll:function(){function e(e){e>=f.max_bottom-250?t&&(f.$nagi.classList.remove("fixed"),t=!1):t||(f.$nagi.classList.add("fixed"),t=!0)}var t=!1;l(e)}};e.exports.page_nagi=_,e.exports.init=o},function(e,t){e.exports=function(e){for(var t=e.offsetLeft,n=e.offsetParent;null!==n;)t+=n.offsetLeft,n=n.offsetParent;return t}},function(e,t){e.exports=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},function(e,t,n){var a=n(2),r=n(1),o=n(3),i=n(5);e.exports=function(){"use strict";function e(){r(function(){d.set(),l.$comment_list_container=c("comment-list-"+u.post_id),l.$comments=c("comments"),window.addComment=p,m.init();var e=new t;e.lang.loading=u.lang.M01,e.lang.error=window.THEME_CONFIG.lang.E01,e.lang.prev=u.lang.M02,e.lang.next=u.lang.M03,e.lang.midd=u.lang.M04,e.pages=window.DYNAMIC_REQUEST.theme_comment_ajax.pages,e.cpage=window.DYNAMIC_REQUEST.theme_comment_ajax.cpage,e.url_format=u.pagi_process_url,e.init();var a=new n;a.init()})}function t(){function e(e,t){h.comments||(h.comments=[]);for(var n=i(t),a=[],r=0,o=n.length;o>r;r++){var s=n[r].querySelectorAll("img");if(s[0])for(var c=0,l=s.length;l>c;c++)a[c]=new Image,a[c].src=s[c].src}h.comments[e]=t}function t(e){return h.comments&&h.comments[e]?h.comments[e]:!1}function n(){return $.pages<=1?!1:(h.$pagi=document.createElement("div"),h.$pagi.id=$.id,h.$pagi.setAttribute("class","comment-pagination"),h.$pagi.appendChild(a()),h.$pagi.appendChild(c()),h.$pagi)}function a(){var e=$.cpage<=1?"disabled":"",t={"class":"prev btn btn-success "+e,href:"javascript:;"};h.$prev=document.createElement("a");for(var n in t)h.$prev.setAttribute(n,t[n]);return h.$prev.innerHTML=$.lang.prev,h.$prev.addEventListener(click_handle,r),h.$prev}function r(e){return e&&e.preventDefault(),$.cpage<=1?!1:(v=parseInt($.cpage)-1,void f())}function s(){$.cpage<=1?h.$prev.classList.add("disabled"):h.$prev.classList.remove("disabled")}function c(){var e=$.cpage>$.pages-1?"disabled":"",t={"class":"next btn btn-default "+e,href:"javascript:;"};h.$next=document.createElement("a");for(var n in t)h.$next.setAttribute(n,t[n]);return h.$next.innerHTML=$.lang.next,h.$next.addEventListener(click_handle,u),h.$next}function u(e){return e&&e.preventDefault(),$.cpage==$.pages?!1:(v=parseInt($.cpage)+1,void f())}function d(){$.cpage==$.pages?h.$next.classList.add("disabled"):h.$next.classList.remove("disabled")}function m(){return $.url_format.replace("=n","="+v)}function f(){if(_(),l.$comments.querySelector("#respond")&&p.cancelMove(),g(),t($.cpage))return l.$comment_list_container.innerHTML=t($.cpage),s(),d(),!1;o("loading",$.lang.loading);var n=new XMLHttpRequest;n.open("GET",m()+"&theme-nonce="+window.DYNAMIC_REQUEST["theme-nonce"]),n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var t;try{t=JSON.parse(n.responseText)}catch(a){t=n.responseText}t&&"success"===t.status?(l.$comment_list_container.innerHTML=t.comments,e($.cpage,t.comments),o("hide"),d(),s()):t&&"error"===t.status?o(t.status,t.msg):o("error",t)}$.always(),n=null},n.onerror=function(){o("error",$.lang.error)}}function g(){$.cpage>=v?$.cpage--:$.cpage++}function _(){location.hash="#none",location.hash="#comments"}this.id="comment-pagination",this.container_id="comment-pagination-container",this.cpage=1,this.pages=1,this.class_name="comment-pagination",this.url_format="",this.lang={loading:"Loading, please wait...",error:"Sorry, some server error occurred, the operation can not be completed, please try again later.",prev:"Previous",next:"Next",midd:"{n} page"},this.before=function(){},this.done=function(){},this.faild=function(){},this.always=function(){};var v,h={},$=this;this.init=function(){return h.$container=document.getElementById($.container_id),h.$container?(h.$container.appendChild(n()),void e($.cpage,l.$comment_list_container.innerHTML)):!1}}function n(){function e(){return s.$respond=c("respond"),s.$fm=c("commentform"),s.$must_logged=c("respond-must-login"),s.$loading_ready=c("respond-loading-ready"),s.$avatar=c("respond-avatar"),s.$area_visitor=c("area-respond-visitor"),s.$comment_parent=c("comment_parent"),s.$comment_ta=c("comment-form-comment"),s.$respond&&s.$fm?(s.$submit_btn=s.$fm.querySelector(".submit"),s.$loading_ready&&s.$loading_ready.parentNode.removeChild(s.$loading_ready),d.registration&&!d.logged?(s.$must_logged.style.display="block",!1):(s.$comment_ta&&s.$comment_ta.addEventListener("keydown",function(e){return 13==e.keyCode&&e.ctrlKey?(s.$submit_btn.click(),!1):void 0},!1),d.logged?(s.$avatar&&(s.$avatar.src=window.DYNAMIC_REQUEST.theme_comment_ajax["avatar-url"]),s.$area_visitor&&s.$area_visitor.parentNode.removeChild(s.$area_visitor)):t(),s.$fm.style.display="block",void s.$fm.addEventListener("submit",n))):!1}function t(){return d.logged?!1:(s.$comment_form_author=c("comment-form-author"),s.$comment_form_email=c("comment-form-email"),s.$comment_form_author&&s.$comment_form_email?(window.DYNAMIC_REQUEST.theme_comment_ajax["user-name"]&&(s.$comment_form_author.value=window.DYNAMIC_REQUEST.theme_comment_ajax["user-name"]),void(window.DYNAMIC_REQUEST.theme_comment_ajax["user-email"]&&(s.$comment_form_email.value=window.DYNAMIC_REQUEST.theme_comment_ajax["user-email"]))):!1)}function n(e){if(""===s.$comment_ta.value.trim())return s.$comment_ta.focus(),o("error",s.$comment_ta.getAttribute("title"),3),!1;if(!d.logged&&d.registration)for(var t=s.$fm.querySelectorAll("input[required]"),n=0,r=t.length;r>n;n++){if("email"===t[n].getAttribute("type")&&!is_email(t[n].value))return o("error",t[n].getAttribute("title"),3),!1;if(""===t[n].value.trim())return o("error",t[n].getAttribute("title"),3),!1}return o("loading",u.lang.M01),s.$submit_btn.setAttribute("disabled",!0),a(),!1}function a(){var e=new XMLHttpRequest,t=new FormData(s.$fm);t.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),e.open("POST",u.process_url),e.send(t),e.onload=function(){if(e.status>=200&&e.status<400){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}if(t&&"success"===t.status){t.comment=t.comment.replace("srcset","data-srcset");var a=i(t.comment);if(a.classList.add("new"),0!=s.$comment_parent.value){var r=c(d.prefix_comment_body_id+s.$comment_parent.value);r.insertAdjacentHTML("afterend",'<ul class="children">'+a.innerHTML+"</ul>"),p.cancelMove()}else l.$comment_list_container.appendChild(a);s.$comment_ta.value="";var u=l.$comments.querySelector(".comment-loading");u&&u.parentNode.removeChild(u);var m=c("comment-number-"+t.post_id);m&&(isNaN(m.innerHTML)?m.innerHTML=1:m.innerHTML++),l.$comments.style.display="block",o(t.status,t.msg,3)}else t&&"error"===t.status?(o(t.status,t.msg),s.$comment_ta.focus()):(o("error",t),s.$comment_ta.select())}else o("error",window.THEME_CONFIG.lang.E01);s.$submit_btn.removeAttribute("disabled")},e.onerror=function(){o("error",window.THEME_CONFIG.lang.E01),s.$submit_btn.removeAttribute("disabled")}}function r(){return s.$goto=c("goto-comment"),s.$comment=c("comment-form-comment"),s.$goto&&s.$comment?(s.$goto.style.display="block",void(s.$goto.onclick=function(){s.$comment.focus()})):!1}var s={},d={logged:window.DYNAMIC_REQUEST.theme_comment_ajax.logged,registration:window.DYNAMIC_REQUEST.theme_comment_ajax.registration,prefix_comment_body_id:"comment-body-"};this.init=function(){r(),e()}}function s(){if(!location.hash||""===location.hash)return!1;var e=location.hash,t=c(e.substr(1));return t?(location.hash="e",void(location.hash=e)):!1}function c(e){return document.getElementById(e)}if(!window.THEME_CONFIG.theme_comment_ajax)return!1;var l={},u={process_url:"",pagi_process_url:"",post_id:"",lang:{M01:"Loading, please wait...",M02:"Previous",M03:"Next",M04:"{n} page"}};u=a(u,window.THEME_CONFIG.theme_comment_ajax);var d={set:function(e){return l.$count=c("comment-number-"+u.post_id),l.$count?void(l.$count.innerHTML=e?e:window.DYNAMIC_REQUEST.theme_comment_ajax.count):!1}},m={init:function(){return window.DYNAMIC_REQUEST.theme_comment_ajax.comments?(l.$comment_list_container.innerHTML=window.DYNAMIC_REQUEST.theme_comment_ajax.comments,void s()):!1},get:function(){var e=this,t=new XMLHttpRequest,n=n({type:"get-comments","post-id":u.post_id,"theme-nonce":window.DYNAMIC_REQUEST["theme-nonce"]});t.open("GET",u.pagi_process_url+"&"+n),t.send(),t.onload=function(){if(t.status>=200&&t.status<400){var n;try{n=JSON.parse(t.responseText)}catch(a){n=t.responseText}n&&n.status?e.done(n):e.fail(n),e.always(n)}}},done:function(e){"success"===e.status&&(l.$comment_list_container.innerHTML=e.comments)},faild:function(e){},always:function(e){}},p={cache:{},cancelMove:function(){var e=this;e.cache.$parent.value="0",e.cache.$tmp.parentNode.insertBefore(e.cache.$respond,e.cache.$tmp),e.cache.$cancel.style.display="none",e.cache.$cancel.onclick=null},moveForm:function(e,t,n,a){var r=this;return r.cache.$comm=c(e),r.cache.$respond=c(n),r.cache.$cancel=c("cancel-comment-reply-link"),r.cache.$parent=c("comment_parent"),r.cache.$post=c("comment_post_ID"),r.cache.$comment=c("comment-form-comment"),r.cache.$comm&&r.cache.$respond&&r.cache.$cancel&&r.cache.$parent?(a=a||!1,r.cache.$tmp||(r.cache.$tmp=document.createElement("div"),r.cache.$tmp.id="wp-temp-form-div",r.cache.$tmp.style.display="none",r.cache.$respond.parentNode.insertBefore(r.cache.$tmp,r.cache.$respond)),r.cache.$comm.parentNode.insertBefore(r.cache.$respond,r.cache.$comm.nextSibling),r.cache.$post&&a&&(r.cache.$post.value=a),r.cache.$parent.value=t,r.cache.$cancel.style.display="block",r.cache.$cancel.onclick=function(){return r.cancelMove(),!1},r.cache.$comment&&r.cache.$comment.focus(),!1):void 0}};e()}},function(e,t,n){var a=n(1),r=n(4);e.exports=function(){"use strict";function e(){c.$emotion_btns=document.querySelectorAll(".comment-emotion-pop-btn"),c.$pop=document.querySelectorAll(".comment-emotion-area-pop .pop"),c.$comment=s("comment-form-comment"),c.$emotion_faces=document.querySelectorAll(".comment-emotion-area-pop a"),c.$emotion_btns[0]&&(c.pop_hide=[],c.replaced=[],i(),t())}function t(){function e(e){e&&e.preventDefault(),c.$comment.focus();var t=c.$comment.selectionStart,n=c.$comment.value;c.$pop[c.active_pop_i].style.display="none",c.$comment.value=n.substring(0,t)+" "+this.getAttribute("data-content")+" "+n.substring(t)}for(var t=0,n=c.$emotion_faces.length;n>t;t++)c.$emotion_faces[t].addEventListener(r,e)}function n(e){e&&e.stopPropagation(),c.$last_show_pop&&(c.$last_show_pop.style.display="none"),document.body.removeEventListener(r,n)}function o(e){e&&e.stopPropagation();for(var t=0,a=c.$pop.length;a>t;t++)c.pop_hide[t]!==!0&&(c.$pop[t].style.display="none",c.pop_hide[t]=!0),this==c.$emotion_btns[t]&&(c.active_pop_i=t,c.pop_hide[t]=!1,c.$pop[t].style.display="block",c.$last_show_pop=c.$pop[t]);if(!c.replaced[c.active_pop_i]){c.replaced[c.active_pop_i]=!0;for(var o=c.$pop[c.active_pop_i].querySelectorAll("img"),t=0,a=o.length;a>t;t++)o[t].src=o[t].getAttribute("data-url"),o[t].removeAttribute("data-url")}document.body.addEventListener(r,n)}function i(){for(var e=0,t=c.$emotion_btns.length;t>e;e++)c.$emotion_btns[e].addEventListener(r,o)}function s(e){return document.getElementById(e)}a(e);var c={}}},function(e,t,n){var a=n(1),r=n(8),o=n(12),i=n(7),s=n(25),c=n(6);e.exports=function(){"use strict";function e(){m.$boxes=document.querySelectorAll(".homebox"),m.$boxes[0]&&(m.len=m.$boxes.length,m.$last_boxes=m.$boxes[m.len-1],m.ori_bottom=i(m.$last_boxes)+m.$last_boxes.offsetHeight,m.ori_offset_left=o(m.$boxes[0]),m.ori_offset_top=i(m.$boxes[0]),d(),t())}function t(){function e(e){e>=m.target_datas[0].offset_top?m.is_fixed||(m.$nav.style.position="fixed",m.$nav.style.top=m.main_nav_gutter+"px",m.is_fixed=!0):m.is_fixed&&(m.$nav.style.position="absolute",m.$nav.style.top=m.ori_offset_top+"px",m.is_fixed=!1);for(var t=0,n=m.target_datas.length;n>t;t++)e>=m.target_datas[t].offset_top&&e<m.target_datas[t].offset_top+m.target_datas[t].height?m.$items[t].classList.add("active"):m.$items[t].classList.remove("active")}c(e)}function n(){m.$nav.style.left=m.ori_offset_left+"px",m.$nav.style.top=m.ori_offset_top+"px"}function l(e){e.preventDefault(),r(this.getAttribute("data-scroll-top"))}function u(){for(var e=0,t=m.$boxes.length;t>e;e++){var n=m.$boxes[e].querySelector(".title a"),a=n.textContent||n.innerText,r=n.querySelector("i"),o=i(m.$boxes[e])-m.main_nav_gutter,s=document.createElement("a");if(r){var c=r.getAttribute("class");m.target_datas[e]={offset_top:o,height:parseInt(getComputedStyle(m.$boxes[e]).marginBottom)+m.$boxes[e].clientHeight},s.setAttribute("data-scroll-top",o),s.href="#"+m.$boxes[e].id,s.title=a,s.innerHTML='<i class="'+c+' fa-fw"></i>',s.addEventListener("click",l),m.$items[e]=s,m.$nav.appendChild(m.$items[e])}}}function d(){m.$nav=document.createElement("nav"),m.$nav.id="homebox-nav",u(),n(),document.body.appendChild(m.$nav)}if(!s){var m={is_fixed:!1,target_datas:[],$items:[],main_nav_gutter:70};a(e)}}},function(e,t,n){var a=n(3),r=n(1),o=n(2);e.exports=function(){"use strict";function e(){r(t)}function t(){if(s.$btns=document.querySelectorAll(".post-point-btn"),!s.$btns[0])return!1;for(var e=0,t=s.$btns.length;t>e;e++)s.$btns[e].addEventListener("click",n)}function n(e){function t(e){"success"===e.status?(a(e.status,e.msg,3),s.$number.innerHTML=e.points):a(e.status,e.msg)}function n(e){a("error",window.THEME_CONFIG.lang.E01)}e.preventDefault(),e.stopPropagation();var r=this.getAttribute("data-post-id"),o=this.getAttribute("data-points");s.$number=i("post-point-number-"+r),a("loading",window.THEME_CONFIG.lang.M01);var l=new XMLHttpRequest,u=new FormData;u.append("post-id",r),u.append("points",o),u.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),l.open("post",c.process_url),l.send(u),l.onload=function(){if(l.status>=200&&l.status<400){var e;try{e=JSON.parse(l.responseText)}catch(r){e=l.responseText}e&&e.status?t(e):n(e)}else a("error",window.THEME_CONFIG.lang.E01)},l.onerror=function(){a("error",window.THEME_CONFIG.lang.E01)}}function i(e){return document.getElementById(e)}if(window.THEME_CONFIG.custom_post_point){var s={},c={process_url:""};c=o(c,window.THEME_CONFIG.custom_post_point),e()}}},function(e,t,n){var a=n(1),r=n(5);e.exports=function(){"use strict";function e(){if(o.$container=document.getElementById("theme_custom_storage-container"),o.$container&&(o.$control_container=document.getElementById("theme_custom_storage-control"),o.$add=o.$control_container.querySelector(".add"),o.$add&&(o.$items=o.$container.querySelectorAll(".item"),o.$dels=o.$container.querySelectorAll(".del"),o.len=o.$items.length,t(),o.len>0)))for(var e=0;e<o.len;e++)n(o.$dels[e])}function t(){o.$add.addEventListener("click",function(){var e=o.$container.getAttribute("data-tpl").replace(/\%placeholder\%/g,+new Date),t=r(e);o.$container.appendChild(t),n(t.querySelector(".del")),t.querySelector("input").focus()})}function n(e){e.addEventListener("click",function(){var e=this.getAttribute("data-target"),t=document.getElementById(e);if(window.jQuery){var n=jQuery(t);n.fadeOut(1,function(){n.remove()}).css({"background-color":"#d54e21"})}else t.parentNode.removeChild(t)})}var o={};a(e)}},function(module,exports,__webpack_require__){var ready=__webpack_require__(1),array_merge=__webpack_require__(2);module.exports=function(){"use strict";function bind(){cache.$container=document.querySelector(".theme_custom_slidebox-container"),cache.$container&&(cache.$main=cache.$container.querySelector(".area-main"),cache.$blurs=cache.$container.querySelectorAll(".area-blur .item"),eval(config.type+"();"))}function scroller(){function e(e){r||(r=!0),a||(a=e.clientX),cache.$main.scrollLeft>=0&&(cache.$main.scrollLeft=cache.$main.scrollLeft-(a-e.clientX)),a=e.clientX}function t(e){r&&(r=!1),e.target.width||(a=0)}function n(){function e(e){var t=this.getAttribute("data-i");if(cache.current_i==t)return!1;cache.current_i=t;for(var n=0;n<cache.len;n++)cache.$blurs[n].classList.contains("active")&&cache.$blurs[n].classList.remove("active"),cache.$as[n].classList.contains("active")&&cache.$as[n].classList.remove("active");this.classList.add("active"),cache.$blurs[t].classList.add("active")}cache.$as=cache.$main.querySelectorAll("a"),cache.current_i=0,cache.len=cache.$as.length;for(var t=0;t<cache.len;t++)cache.$as[t].setAttribute("data-i",t),cache.$as[t].addEventListener("mouseover",e)}var a,r=!1;cache.$main.addEventListener("mouseout",t),cache.$main.addEventListener("mousemove",e),n()}function candy(){function e(e){var t=this.getAttribute("data-i");if(cache.current_i==t)return!1;cache.current_i=t;for(var n=0;n<cache.len;n++)cache.$blurs[n].classList.contains("active")&&cache.$blurs[n].classList.remove("active"),cache.$mains[n].classList.contains("active")&&cache.$mains[n].classList.remove("active"),cache.$thumbnails[n].classList.contains("active")&&cache.$thumbnails[n].classList.remove("active");this.classList.add("active"),cache.$blurs[t].classList.add("active"),cache.$mains[t].classList.add("active")}cache.$mains=cache.$container.querySelectorAll(".area-main .item"),cache.$thumbnails=cache.$container.querySelectorAll(".area-thumbnail .item"),cache.len=cache.$thumbnails.length,cache.current_i=0;for(var t=0;t<cache.len;t++)cache.$thumbnails[t].setAttribute("data-i",t),cache.$thumbnails[t].addEventListener("mouseover",e)}if(window.THEME_CONFIG.theme_custom_slidebox){var cache={},config={type:"candy"};config=array_merge(config,window.THEME_CONFIG.theme_custom_slidebox),ready(bind)}}},function(e,t,n){var a=n(1),r=n(2),o=n(4);e.exports=function(){"use strict";function e(){a(t)}function t(){p.$main=m("main"),p.$side=m("sidebar-container"),p.$main&&p.$side&&d()&&(p.$btn.addEventListener(o,u),1==localStorage.getItem(f.key)&&s())}function i(){window.jQuery&&jQuery(window).resize();try{n(11).page_nagi.reset_nagi_style()}catch(e){}}function s(e){p.$btn.classList.remove("fa-angle-right"),p.$btn.classList.add("fa-angle-left"),p.$main.classList.add("expand"),p.$side.classList.add("expand"),i(),e&&localStorage.setItem(f.key,1)}function c(){p.$btn.classList.remove("fa-angle-left"),p.$btn.classList.add("fa-angle-right"),p.$main.classList.remove("expand"),p.$side.classList.remove("expand"),i(),localStorage.removeItem(f.key)}function l(){return p.$main.classList.contains("expand")}function u(){l()?c():s(!0)}function d(){var e=document.querySelector(".singular-post");if(!e)return!1;var t=document.createElement("i");return t.id="full-width-mode",t.title=f.lang.M01,t.setAttribute("class","fa fa-angle-right fa-2x"),e&&e.appendChild(t),p.$btn=t,!0}function m(e){return document.getElementById(e)}if(window.THEME_CONFIG.theme_full_width_mode){var p={},f={key:"full-width-mode",lang:{M01:"Full width mode"}};f=r(f,window.THEME_CONFIG.theme_full_width_mode),e()}}},function(e,t,n){var a=n(1);e.exports=function(){"use strict";function e(){var e=document.querySelectorAll(".bdsharebuttonbox");if(!e[0])return!1;for(var t={common:{bdSnsKey:{},dText:!1,bdMiniList:!1,bdMini:2,bdPic:!1,bdStyle:!1,bdSize:16},share:[],selectShare:!1},n=0,a=e.length;a>n;n++){var r="bdshare_tag_"+n,o=JSON.parse(e[n].getAttribute("data-bdshare").replace(/\'/g,'"'));o.bdSign="off",o.tag=r,e[n].setAttribute("data-tag",r),t.share.push(o)}window._bd_share_config=t,setTimeout(function(){var e=document.createElement("script");e.src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5),e.async=!0,document.getElementsByTagName("head")[0].appendChild(e)},5e3)}a(e)}},function(e,t,n){var a=n(1);e.exports=function(){"use strict";function e(){if(window.DYNAMIC_REQUEST&&window.DYNAMIC_REQUEST.theme_post_views)for(var e in window.DYNAMIC_REQUEST.theme_post_views){var t=document.getElementById("post-views-number-"+e);t&&(t.innerHTML=window.DYNAMIC_REQUEST.theme_post_views[e])}}window.THEME_CONFIG.theme_post_views&&a(e)}},function(e,t,n){var a=n(1);e.exports=function(){"use strict";function e(e){this.value&&(location.href=this.value)}function t(){for(var t=0,a=n.length;a>t;t++)n[t].addEventListener("change",e)}var n=document.querySelectorAll(".archive-pagination select");n[0]&&a(t)}},function(e,t,n){var a=n(8),r=n(4),o=n(1);e.exports=function(){"use strict";function e(){o(function(){var e=document.getElementById("back-to-top");e&&e.addEventListener(r,function(e){e.preventDefault(),a(0)})})}e()}},function(e,t){e.exports=/Mobi/.test(navigator.userAgent)},function(e,t){e.exports=function(){!function(){function e(e){var t=0;if(e.offsetParent){do t+=e.offsetTop;while(e=e.offsetParent);return t}}var t=window.addEventListener||function(e,t){window.attachEvent("on"+e,t)},n=window.removeEventListener||function(e,t){window.detachEvent("on"+e,t)},a={cache:[],mobileScreenSize:500,addObservers:function(){t("scroll",a.throttledLoad),t("resize",a.throttledLoad)},removeObservers:function(){n("scroll",a.throttledLoad,!1),n("resize",a.throttledLoad,!1)},throttleTimer:(new Date).getTime(),throttledLoad:function(){var e=(new Date).getTime();e-a.throttleTimer>=200&&(a.throttleTimer=e,a.loadVisibleImages())},loadVisibleImages:function(){for(var t=window.pageYOffset||document.documentElement.scrollTop,n=window.innerHeight||document.documentElement.clientHeight,r={min:t-200,max:t+n+200},o=0;o<a.cache.length;){var i=a.cache[o],s=e(i),c=i.height||0;if(s>=r.min-c&&s<=r.max){var l=i.getAttribute("data-src-mobile");i.onload=function(){this.className=this.className.replace(/(^|\s+)lazy-load(\s+|$)/,"$1lazy-loaded$2")},i.src=l&&screen.width<=a.mobileScreenSize?l:i.getAttribute("data-src"),i.removeAttribute("data-src"),i.removeAttribute("data-src-mobile"),a.cache.splice(o,1)}else o++}0===a.cache.length&&a.removeObservers()},init:function(){document.querySelectorAll||(document.querySelectorAll=function(e){var t=document,n=t.documentElement.firstChild,a=t.createElement("STYLE");return n.appendChild(a),t.__qsaels=[],a.styleSheet.cssText=e+"{x:expression(document.__qsaels.push(this))}",window.scrollBy(0,0),t.__qsaels}),t("load",function e(){for(var t=document.querySelectorAll("img[data-src]"),r=0;r<t.length;r++){var o=t[r];a.cache.push(o)}a.addObservers(),a.loadVisibleImages(),n("load",e,!1)})}};a.init()}()}},function(e,t,n){var a=n(4),r=n(1);e.exports=function(){"use strict";function e(){if(s.$toggles=document.querySelectorAll("a[data-mobile-target]"),s.$toggles[0]){t();for(var e=0,n=s.$toggles.length;n>e;e++)s.$toggles[e].addEventListener(a,i)}}function t(){s.$layer=document.createElement("div"),s.$layer.id="mobile-on-layer",s.$layer.addEventListener(a,o),document.body.appendChild(s.$layer)}function n(){var e=s.$last_click_btn.getAttribute("data-icon-active"),t=s.$last_click_btn.getAttribute("data-icon-original");document.body.classList.add("menu-on"),s.$last_target.classList.add("on"),e&&t&&(s.$last_click_btn.classList.remove(t),s.$last_click_btn.classList.add(e));var n=s.$last_click_btn.getAttribute("data-focus-target");if(n){var a=document.querySelector(n);a&&a.focus()}}function o(){var e=s.$last_click_btn.getAttribute("data-icon-active"),t=s.$last_click_btn.getAttribute("data-icon-original");document.body.classList.remove("menu-on"),s.$last_target.classList.remove("on"),e&&t&&(s.$last_click_btn.classList.remove(e),s.$last_click_btn.classList.add(t))}function i(e){s.$last_target=document.querySelector(this.getAttribute("data-mobile-target")),s.$last_click_btn=this,
s.$last_target.classList.contains("on")?o():n()}var s={};r(e)}},function(e,t,n){var a=n(4);e.exports=function(){function e(){var e=o.getAttribute("data-icon-active"),t=o.getAttribute("data-icon-original");i.classList.add("on"),e&&t&&(o.classList.remove(t),o.classList.add(e));var n=o.getAttribute("data-focus-target");if(n){var a=document.querySelector(n);a&&setTimeout(function(){a.focus()},500)}}function t(e){e&&e.preventDefault();var t=o.getAttribute("data-icon-active"),n=o.getAttribute("data-icon-original");i.classList.remove("on"),t&&n&&(o.classList.remove(t),o.classList.add(n))}function n(n){i=document.querySelector(this.getAttribute("data-toggle-target")),o=this,i.classList.contains("on")?t():e()}var r=document.querySelectorAll("a[data-toggle-target]");if(r[0])for(var o,i,s=0,c=r.length;c>s;s++)r[s].addEventListener(a,n)}},function(e,t,n){var a=n(6),r=n(1);e.exports=function(){"use strict";function e(){i.$menu=document.querySelector(".nav-main"),i.$menu&&(i.menu_height=i.$menu.offsetHeight,i.y=0,i.fold=!1,o(window.pageYOffset),a(o))}function t(){i.fold||(i.$menu.classList.add("fold"),i.$menu.classList.remove("top"),i.fold=!0)}function n(){i.fold&&(i.$menu.classList.remove("fold"),i.fold=!1)}function o(e){e<=i.menu_height?(n(),i.$menu.classList.add("top")):i.y<=e?t():i.y-e<100&&n(),i.y=e}var i={};r(e)}},function(e,t){e.exports=function(){function e(e){e&&e.preventDefault(),setTimeout(function(){a.focus()},100)}var t=document.querySelector(".main-nav a.search");if(!t)return!1;var n=document.querySelector(t.getAttribute("data-toggle-target")),a=n.querySelector('input[type="search"]'),r=function(){return""===a.value.trim()?(a.focus(),!1):void 0};t.addEventListener(click_handle,e),n.onsubmit=r}},function(e,t,n){var a=n(1);e.exports=function(){function e(){a(t)}function t(){var e=document.querySelectorAll(".hide-no-js"),t=document.querySelectorAll(".hide-on-js");if(e[0])for(var n=0,a=e.length;a>n;n++)e[n].style.display="none";if(t[0])for(var n=0,a=t.length;a>n;n++)t[n].style.display="none"}e()}},,,,,function(e,t,n){var a=n(1),r=n(2),o=n(55),i=n(3),s=n(9),c=n(13),l=n(10);e.exports=function(){"use strict";function e(){m(),u(),n(),d()}function t(){return document.querySelectorAll(".clt-list").length}function n(){function e(e){e&&e.preventDefault();var a=t();return a<g.min_posts?(i("error",g.lang.E02,3),!1):a>g.max_posts?(i("error",g.lang.E03,3),!1):void n()}function n(){for(var e=document.querySelectorAll(".clt-list"),t="",n=0,r=e.length;r>n;n++){for(var s=e[n].querySelectorAll("[required]"),c=0,l=s.length;l>c;c++)if(""===s[c].value.trim())return i("error",s[c].getAttribute("title"),3),s[c].focus(),!1;var u=e[n].getAttribute("data-id"),d=e[n].querySelectorAll("img"),m=d[d.length-1].src;t+=o(g.tpl_preview,["%hash%","%title%","%thumbnail%","%content%"],[u,p("clt-list-post-title-"+u).value,m,p("clt-list-post-content-"+u).value])}a(t)}function a(e){f.$preview_container.innerHTML=e}var r=p("clt-preview");return f.$preview_container=p("clt-preview-container"),r?void r.addEventListener("click",e):!1}function u(){function e(){var e=function(e){if(e&&e.preventDefault(),t()>=g.max_posts)return i("error",g.lang.E03,3),!1;var o,s=Date.now(),c=document.createElement("div");c.innerHTML=n(s),o=c.firstChild,o.classList.add("delete"),r.$container.appendChild(o),a(o),setTimeout(function(){o.classList.remove("delete")},1)};r.$add.addEventListener("click",e)}function n(e){return g.tpl_input.replace(/%placeholder%/g,e)}function a(e){function n(n){var a=function(n){return n&&n.preventDefault(),t()<=g.min_posts?(i("error",g.lang.E02,3),!1):(e.classList.add("delete"),void setTimeout(function(){e.parentNode.removeChild(e)},500))};p("clt-list-del-"+n).addEventListener("click",a)}function a(e){function t(){var t=p("clt-list-post-id-"+e),a=function(t){t.preventDefault();var a=this.value;return""===a.trim()?!1:isNaN(a.trim())===!0?(this.select(),i("error",g.lang.E04,3),!1):void(r(a)?o(a,e):n(a,e,this))};t.addEventListener("change",a,!1),t.addEventListener("blur",a,!1)}function n(e,t,n){function r(r){r&&"success"===r.status?(a(e,r),o(e,t),i(r.status,r.msg,3)):r&&"error"===r.status?(a(e,r),n.select(),i(r.status,r.msg,3)):i("error",r)}i("loading",g.lang.M03);var s=new XMLHttpRequest,l={type:"get-post","post-id":e,"theme-nonce":window.DYNAMIC_REQUEST["theme-nonce"]};s.open("GET",g.process_url+"&"+c(l)),s.send(),s.onload=function(){if(s.status>=200&&s.status<400){var e;try{e=JSON.parse(s.responseText)}catch(t){e=s.responseText}r(e)}else i("error",g.lang.E01)},s.onerror=function(){i("error",g.lang.E01)}}function a(e,t){return f.posts&&f.posts[e]?!1:(f.posts||(f.posts={}),void(f.posts[e]={thumbnail:t.thumbnail,title:t.title,excerpt:t.excerpt}))}function r(e,t){return f.posts&&f.posts[e]?t?f.posts[e][t]:f.posts[e]:!1}function o(e,t){var n=p("clt-list-post-content-"+t),a=p("clt-list-thumbnail-"+t),r=p("clt-list-thumbnail-url-"+t);f.posts[e].title&&(p("clt-list-post-title-"+t).value=f.posts[e].title),f.posts[e].excerpt&&""===n.value.trim()&&(n.value=f.posts[e].excerpt),f.posts[e].thumbnail&&(a.src=f.posts[e].thumbnail.url,r.value=f.posts[e].thumbnail.url)}t()}if(!e)return!1;var r=e.getAttribute("data-id");n(r),a(r)}var r={},o=document.querySelectorAll(".clt-list");if(!o[0])return!1;r.$add=p("clt-add-post"),r.$container=p("clt-lists-container");for(var s=0,l=o.length;l>s;s++)a(o[s]);e()}function d(){var e={};if(e.$fm=p("fm-clt"),!e.$fm)return!1;var t=new l;t.$fm=e.$fm,t.process_url=g.process_url,t.error_tx=g.lang.E01,t.init()}function m(){function e(e){e.stopPropagation(),e.preventDefault(),c.files=e.dataTransfer.files,n(c.files[0])}function t(e){e.stopPropagation(),e.preventDefault(),c.files=e.target.files.length?e.target.files:e.originalEvent.dataTransfer.files,n(c.files[0])}function n(e){var t=new FileReader;t.onload=function(t){a(e)},t.readAsDataURL(e)}function a(e){r("loading",g.lang.M01);var t=new FormData,n=new XMLHttpRequest;t.append("type","add-cover"),t.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),t.append("img",e),n.open("post",g.process_url),n.send(t),n.upload.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;c.$progress_bar.style.width=t+"%"}},n.onload=function(){if(n.status>=200&&n.status<400){var e;try{e=JSON.parse(n.responseText)}catch(t){e=n.responseText}e&&"success"===e.status?(c.$cover.src=e.thumbnail.url,c.$thumbnail_id.value=e["attach-id"],i(e.status,e.msg,3)):e&&"error"===e.status?i(e.status,e.msg):i("error",e)}else i("error",g.lang.E01);r("hide")},n.onerror=function(){i("error",g.lang.E01)}}function r(e,t){return"hide"===e?(c.$progress.style.display="none",c.$file_area.style.display="block",!1):(c.$file_area.style.display="none",c.$progress.style.display="block",c.$progress_bar.style.width="10%",void(c.$progress_tx.innerHTML=s(e,t)))}var o=p("clt-file"),c={};return c.$cover=p("clt-cover"),c.$progress=p("clt-file-progress"),c.$tip=p("clt-file-tip"),c.$progress_bar=p("clt-file-progress-bar"),c.$progress_tx=p("clt-file-progress-tx"),c.$thumbnail_id=p("clt-thumbnail-id"),c.$file_area=p("clt-file-area"),o?(o.addEventListener("change",t),o.addEventListener("drop",e),void o.addEventListener("dragover",t)):!1}function p(e){return document.getElementById(e)}if(window.THEME_CONFIG.theme_custom_collection){var f={},g={process_url:"",tpl_input:"",tpl_preview:"",min_posts:5,max_posts:10,lang:{M01:"Loading, please wait...",M02:"A item has been deleted.",M03:"Getting post data, please wait...",M04:"Previewing, please wait...",E01:"Sorry, server is busy now, can not respond your request, please try again later.",E02:"Sorry, the minimum number of posts is %d.",E03:"Sorry, the maximum number of posts is %d.",E04:"Sorry, the post id must be number, please correct it."}};g=r(g,window.THEME_CONFIG.theme_custom_collection),a(e)}}},,function(e,t,n){var a=n(1),r=n(2),o=n(3),i=n(10),s=n(59),c=n(5);e.exports=function(){"use strict";function e(e){return document.getElementById(e)}function t(){a(n)}function n(){return N.$fm=e("fm-ctb"),N.$post_id=e("ctb-post-id"),N.$post_title=e("ctb-title"),N.$download_demourl = e("theme_custom_download_demourl"),N.$download_point = e("theme_custom_download_point"),N.$post_content=e("ctb-content"),N.$post_excerpt=e("ctb-excerpt"),N.$file_area=e("ctb-file-area"),N.$file_btn=e("ctb-file-btn"),N.$file=e("ctb-file"),N.$files=e("ctb-files"),N.$file_progress_container=e("ctb-file-progress-container"),N.$file_progress=e("ctb-file-progress"),N.$file_completion_tip=e("ctb-file-completion"),N.$split_number=e("ctb-split-number"),N.$batch_insert=e("ctb-batch-insert-btn"),N.$fm?(e("fm-ctb-loading").style.display="none",N.$fm.style.display="block",N.$post_title.focus(),g(),_(),I(),H(),C(),l(),u(),O.bind(),void A()):!1}function l(){var e=function(){localStorage.setItem("ctb-split-number",this.value)};N.$split_number.addEventListener("change",e)}function u(){var e=parseInt(localStorage.getItem("ctb-split-number"));e>0&&(N.$split_number.value=e)}function d(e){var t={full:{url:e.full.url},large:{url:e.large.url,width:e.large.width,height:e.large.height},thumbnail:{url:e.thumbnail.url},"attach-id":e["attach-id"]};return t["attach-page-url"]=e["attach-page-url"],t}function m(e){var t=tinymce.editors["ctb-content"];t&&!t.isHidden()?tinymce.editors["ctb-content"].setContent(e):N.$post_content.value=e}function p(){var e=tinymce.editors["ctb-content"];return e&&!e.isHidden()?tinymce.editors["ctb-content"].getContent():N.$post_content.value}function f(e){var t=tinymce.editors["ctb-content"];t&&!t.isHidden()?t.execCommand("mceInsertContent",!1,e):"undefined"!=typeof QTags?QTags.insertContent(e):N.$post_content.value+=e}function g(){if(!k.edit||!k.attachs)return!1;for(var e in k.attachs)M(k.attachs[e])}function _(){N.$file.addEventListener("change",$),N.$file.addEventListener("drop",h),N.$file.addEventListener("dragover",v)}function v(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function h(e){e.stopPropagation(),e.preventDefault(),N.files=e.dataTransfer.files,N.file_count=N.files.length,N.file=N.files[0],N.file_index=0,b(N.files[0])}function $(e){e.stopPropagation(),e.preventDefault(),N.files=e.target.files.length?e.target.files:e.originalEvent.dataTransfer.files,N.file_count=N.files.length,N.file=N.files[0],N.file_index=0,b(N.files[0]),N.$file_progress.style.width="1px"}function b(e){w(e)}function w(e){y();var t=new FormData,n=new XMLHttpRequest;t.append("type","upload"),t.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),t.append("img",e),n.open("post",k.process_url),n.onload=function(){n.status>=200&&n.status<400?x(n.responseText):E(n.responseText),n=null},n.upload.onprogress=function(e){if(e.lengthComputable){var t=e.loaded*N.file_index/(e.total*N.file_count)*100;N.$file_progress.style.width=t+"%"}},n.send(t)}function y(){var e=s(k.lang.M02,N.file_index+1,N.file_count);S("loading",e)}function E(e){e=e?e:k.lang.E01,S("error",e)}function x(e){try{e=JSON.parse(e)}catch(t){}if(N.file_index++,e&&"success"===e.status)if(M(e),N.file_count===N.file_index){var n=s(k.lang.M04,N.file_index,N.file_count);S("success",n),N.$file.value=""}else b(N.files[N.file_index]);else N.file_index>0,N.file_count>N.file_index?b(N.files[N.file_index]):(N.is_uploading=!1,e&&"error"===e.status?E(e.msg):(E(k.lang.E01),console.error(e)),N.$file.value="")}function M(e){var t=L(e);N.$files.style.display="block",N.$files.appendChild(t),t.style.display="block"}function L(t){N.$post_title||(N.$post_title=e("ctb-title"));var n=document.createElement("div"),a=""==N.$post_title?k.lang.M10:N.$post_title.value,r='<a class="img-link" href="'+t.full.url+'" target="_blank" title="'+k.lang.M06+'"><img src="'+t.thumbnail.url+'" alt="'+a+'" ></a><a href="javascript:;" class="btn btn-default btn-block ctb-insert-btn" id="ctb-insert-'+t["attach-id"]+'" data-size="large" data-attach-page-url="'+t["attach-page-url"]+'" data-width="'+t.large.width+'" data-height="'+t.large.height+'" data-large-url="'+t.large.url+'" ><i class="fa fa-plug"></i> '+k.lang.M09+'</a><input type="radio" name="ctb[thumbnail-id]" id="img-thumbnail-'+t["attach-id"]+'" value="'+t["attach-id"]+'" hidden class="img-thumbnail-checkbox" required ><label for="img-thumbnail-'+t["attach-id"]+'" class="ctb-set-cover-btn"><i class="fa fa-star"></i> '+k.lang.M07+'</label><input type="hidden" name="ctb[attach-ids][]" value="'+t["attach-id"]+'" >';n.id="img-"+t["attach-id"],n.setAttribute("class","thumbnail-tpl g-phone-1-2 g-tablet-1-3 g-desktop-1-4"),n.innerHTML=r,n.style.display="none",(!k.thumbnail_id&&!N.first_cover||t["attach-id"]==k.thumbnail_id)&&(n.querySelector(".img-thumbnail-checkbox").checked=!0,N.first_cover=!0);for(var o=n.querySelectorAll(".ctb-insert-btn"),i=function(){f(T({attach_page_url:this.getAttribute("data-attach-page-url"),width:this.getAttribute("data-width"),height:this.getAttribute("data-height"),img_url:t[this.getAttribute("data-size")].url}))},s=0,c=o.length;c>s;s++)o[s].addEventListener("click",i,!1);return n}function T(e){var t=""==N.$post_title?k.lang.M10:N.$post_title.value;return'<p><a href="'+e.attach_page_url+'" title="'+t+'" target="_blank" ><img src="'+e.img_url+'" alt="'+t+'" width="'+e.width+'" height="'+e.height+'"></a></p>'}function S(e,t){e&&"loading"!==e?(o(e,t),N.$file_progress_container.style.display="none",N.$file_area.style.display="block"):(o(e,t),N.$file_progress_container.style.display="block",N.$file_area.style.display="none")}function A(){N.$batch_insert.addEventListener("click",q)}function q(){var e=O.get_data_preview(),t=[],n=0;if(!e)return!1;var a=Object.keys(e).length;for(var r in e)t.push(T({attach_page_url:e[r]["attach-page-url"],img_url:e[r].large.url,width:e[r].large.width,height:e[r].large.height})),N.$split_number.value>0&&a-1>n&&(n+1)%N.$split_number.value==0&&t.push(" <!--nextpage--> "),n++;t&&f(t.join(""))}function C(){var e=new i;e.process_url=k.process_url,e.loading_tx=k.lang.M01,e.error_tx=k.lang.E01,e.$fm=N.$fm,e.before=function(e){e.append("ctb[post-content]",p())},e.done=function(e){k.edit&&N.$fm.querySelector(".submit").removeAttribute("disabled"),"success"===e.status&&O.del()},e.init()}function I(){function t(e){var t=document.createElement("option");t.innerHTML=k.lang.M14,t.value="",e.appendChild(t)}function n(){N.$parent_cat=document.createElement("select"),N.$parent_cat.name="ctb[cats][]",N.$parent_cat.classList.add("ctb-cat"),N.$parent_cat.classList.add("form-control"),N.$parent_cat.required=!0,t(N.$parent_cat);for(var e in k.cats)if(!(k.cats[e].parent>0)){var n=document.createElement("option");n.value=k.cats[e].term_id,n.title=k.cats[e].description,n.innerHTML=k.cats[e].name,N.$parent_cat.appendChild(n)}N.$parent_cat.addEventListener("change",r),N.$cat_container.appendChild(N.$parent_cat)}function a(e){var t=e.nextElementSibling;t&&(t.parentNode.removeChild(t),a(e))}function r(){a(this);var e=this.value,n=N["$cat_"+e];if(e){if(n)return void N.$cat_container.appendChild(n);for(var o in k.cats)if(k.cats[o].parent==e){var i=document.createElement("option");i.value=k.cats[o].term_id,i.title=k.cats[o].description,i.innerHTML=k.cats[o].name,n||(n=document.createElement("select"),n.name="ctb[cats][]",n.classList.add("ctb-cat"),n.classList.add("form-control"),t(n),n.addEventListener("change",r)),n.appendChild(i)}n&&N.$cat_container.appendChild(n)}}return k.cats?(N.$cat_container=e("ctb-cat-container"),void(N.$cat_container&&n())):!1}function H(){for(var t=document.querySelectorAll(".theme_custom_post_source-source-radio"),n=document.querySelectorAll(".theme_custom_post_source-inputs"),a=function(t){for(var a=t.getAttribute("target"),r=e(a),o=0,i=n.length;i>o;o++)if(r&&r.id===a&&t.checked){r.style.display="block";var s=r.querySelector("input");""===s.value.trim()&&s.focus()}else n[o].style.display="none"},r=function(){a(this)},o=0,i=t.length;i>o;o++)a(t[o]),t[o].addEventListener("change",r)}if(window.THEME_CONFIG.theme_custom_contribution){var N={},k={fm_id:"fm-ctb",file_area_id:"ctb-file-area",file_btn_id:"ctb-file-btn",file_id:"ctb-file",file_tip_id:"ctb-file-tip",files_id:"ctb-files",edit:!1,thumbnail_id:!1,attachs:!1,cats:!1,default_size:"large",process_url:"",lang:{M01:"Loading, please wait...",M02:"Uploading {0}/{1}, please wait...",M03:"Click to delete",M04:"{0} files have been uploaded.",M05:"Source",M06:"Click to view source",M07:"Set as cover.",M08:"Optional: some description",M09:"Insert",M10:"Preview",M11:"Large size",M12:"Medium size",M13:"Small size",M14:"Please select a category",E01:"Sorry, server is busy now, can not respond your request, please try again later."}};k=r(k,window.THEME_CONFIG.theme_custom_contribution);var O={config:{save_interval:30,lang:{M01:"You have a auto save version, do you want to restore? Auto save last time is {time}.",M02:"Restore completed.",M03:"The data has saved your browser."}},timer:!1,bind:function(){var t=this;this.save_key="auto-save-"+N.$post_id.value,this.check_version(),this.timer=setInterval(function(){t.save()},1e3*this.config.save_interval),N.$quick_save=e("ctb-quick-save"),N.$quick_save&&N.$quick_save.addEventListener("click",function(){""===N.$post_title.value?N.$post_title.focus():(t.save(),o("success",t.config.lang.M03,3))})},get:function(){var e=localStorage.getItem(this.save_key);return e?JSON.parse(e):!1},check_version:function(){var e=this.get();if(!e||!e.can_restore)return!1;var t=this.config.lang.M01.replace("{time}",e.time);return confirm(t)?(this.restore(),void o("success",this.config.lang.M02,3)):!1},get_data_preview:function(){var e=document.querySelectorAll(".ctb-insert-btn");if(!e[0])return!1;for(var t=document.querySelectorAll(".img-link"),n=document.querySelectorAll(" .img-link img"),a=document.querySelectorAll(".img-thumbnail-checkbox"),r={},o=0,i=e.length;i>o;o++)r[a[o].value]={"attach-page-url":e[o].getAttribute("data-attach-page-url"),full:{url:t[o].href},large:{url:e[o].getAttribute("data-large-url"),width:e[o].getAttribute("data-width"),height:e[o].getAttribute("data-height")},thumbnail:{url:n[o].src},"attach-id":a[o].value};return r},del:function(){localStorage.removeItem(this.save_key),clearInterval(this.timer)},save:function(){var t={can_restore:!1};""!==N.$post_title.value&&(t.title=N.$post_title.value,t.can_restore=!0),""!==N.$post_excerpt.value&&(t.excerpt=N.$post_excerpt.value,t.can_restore=!0);var n=p();if(""!==n&&(t.content=n,t.can_restore=!0),document.querySelector(".theme_custom_storage-group")&&(t.storage={},N.$storage_items=document.querySelectorAll(".theme_custom_storage-item"),N.$storage_items[0]))for(var a=0,r=N.$storage_items.length;r>a;a++){t.storage[a]||(t.storage[a]={});var o=N.$storage_items[a].getAttribute("data-placeholder");t.storage[a]={url:e("theme_custom_storage-"+o+"-url").value,download_pwd:e("theme_custom_storage-"+o+"-download-pwd").value,extract_pwd:e("theme_custom_storage-"+o+"-extract-pwd").value};var i=e("theme_custom_storage-"+o+"-name");i&&(t.storage[a].name=i.value)}"" !== N.$download_demourl.value && (t.download_demourl = N.$download_demourl.value, t.can_restore = !0);"" !== N.$download_point.value && (t.download_point = N.$download_point.value, t.can_restore = !0);var s=document.querySelectorAll(".ctb-preset-tag:checked");if(s[0]){t.preset_tags={};for(var a=0,r=s.length;r>a;a++)t.preset_tags[a]||(t.preset_tags[a]={}),t.preset_tags[a]=s[a].id;t.can_restore=!0}var c=document.querySelectorAll(".ctb-custom-tag");if(c[0]){t.custom_tags={};for(var a=0,r=c.length;r>a;a++)t.custom_tags[c[a].id]||(t.custom_tags[c[a].id]={}),t.custom_tags[c[a].id]=c[a].value}var l=document.querySelector(".theme_custom_post_source-source-radio:checked");l&&(t.source={source:l.value,reprint_url:e("theme_custom_post_source-reprint-url").value,reprint_author:e("theme_custom_post_source-reprint-author").value}),t.preview=this.get_data_preview(),t.preview&&(t.can_restore=!0);var u=document.querySelector(".img-thumbnail-checkbox:checked");u&&(t.cover_id=u.value,t.can_restore=!0);var d=new Date;t.time=d.getFullYear()+"-"+d.getMonth()+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes(),localStorage.setItem(this.save_key,JSON.stringify(t))},restore:function(){var t=this.get();if(!t||!t.can_restore)return!1;if(t.title&&(N.$post_title.value=t.title),t.excerpt&&(N.$post_excerpt.value=t.excerpt),t.content&&m(t.content),t.download_demourl&&(N.$download_demourl.value=t.download_demourl),t.download_point&&(N.$download_point.value=t.download_point),t.storage&&document.querySelector(".theme_custom_storage-group")){var n=e("theme_custom_storage-container"),a=n.getAttribute("data-tpl");n.innerHTML="";for(var r in t.storage){var o=c(a.replace(/\%placeholder\%/g,r)),i=o.querySelector("#theme_custom_storage-"+r+"-name");i&&(i.value=t.storage[r].name);var s=o.querySelector("#theme_custom_storage-"+r+"-url");s.value=t.storage[r].url;var l=o.querySelector("#theme_custom_storage-"+r+"-download-pwd");l.value=t.storage[r].download_pwd;var u=o.querySelector("#theme_custom_storage-"+r+"-extract-pwd");u.value=t.storage[r].extract_pwd,n.appendChild(o)}}if(t.preset_tags)for(var r in t.preset_tags){var p=e(t.preset_tags[r]);p&&(p.checked=!0)}if(t.custom_tags)for(var r in t.custom_tags){var f=e(r);f&&(f.value=t.custom_tags[r])}if(t.source&&t.source.source){var g=e("theme_custom_post_source-source-"+t.source.source),_=e("theme_custom_post_source-reprint-url"),v=e("theme_custom_post_source-reprint-author");_&&(_.value=t.source.reprint_url),_&&(v.value=t.source.reprint_author),g&&(g.checked=!0)}if(t.preview){t.cover_id&&(k.thumbnail_id=t.cover_id);for(var r in t.preview)M(d(t.preview[r]))}}};t()}}},,,,function(e,t,n){var a=n(1),r=n(3),o=n(5),i=n(13),s=n(2);e.exports=function(){"use strict";function e(){a(function(){return t(),k.$tabs_container?(g(),A(),void n()):!1})}function t(){if(k.$tabs_container=H("pm-tab"),!k.$tabs_container)return!1;k.$dialogs_container=document.querySelector(".pm-dialog-container"),k.$tmp_dialogs=document.querySelectorAll(".pm-dialog"),k.$tmp_tabs=k.$tabs_container.querySelectorAll("a"),k.$dialog_new=H("pm-dialog-new"),k.$dialog_new_uid=H("pm-dialog-content-new"),k.$tabs={},k.$dialogs={};var e=H("pm-loading-tip");e.parentNode.removeChild(e),H("pm-container").style.display="block",k.tab_count=k.$tmp_tabs.length;for(var t=0;t<k.tab_count;t++){var n=k.$tmp_tabs[t].getAttribute("data-uid"),a=k.$tmp_tabs[t].querySelector(".close");k.$tabs[n]=k.$tmp_tabs[t],k.$dialogs[n]=k.$tmp_dialogs[t],"new"!==n&&(N.userdata[n]={name:k.$tabs[n].querySelector(".author").innerHTML,avatar:k.$tabs[n].querySelector("img").src,url:k.$tabs[n].getAttribute("data-url")}),u(n),l(n),a&&a.addEventListener("click",y),"new"!==n&&k.$dialogs[n].addEventListener("submit",w)}for(var t=0;t<k.tab_count;t++){var n=k.$tmp_tabs[t].getAttribute("data-uid");n===N.uid&&(p(n),m(n),k.$current_tab=k.$tabs[n])}}function n(){k.preset_uid=c(),k.preset_uid&&(k.$tabs[k.preset_uid]?f(k.preset_uid):b(k.preset_uid))}function c(){return location.hash&&parseInt(location.hash.replace("#",""))}function l(e){function t(t){t.preventDefault(),t.stopPropagation(),p(e),m(e),q(e,"hide")}k.$tabs[e].addEventListener("click",t)}function u(e){var t=k.$dialogs[e].querySelector(".pm-dialog-list");t&&(t.scrollTop=t.scrollHeight)}function d(e){return k.$current_tab.getAttribute("uid")===e}function m(e){H("pm-dialog-content-"+e).focus()}function p(e){N.uid=e;for(var t in k.$tabs)t!=e?(k.$tabs[t].classList.remove("active"),k.$dialogs[t].style.display="none"):(k.$dialogs[e].style.display="block",k.$tabs[e].classList.add("active"))}function f(e){k.$tabs[e]||(k.$tabs[e]=H("pm-tab-"+e)),d(e)||p(e),m(e)}function g(){k.$dialog_new.addEventListener("submit",_)}function _(){var e=k.$dialog_new_uid.value;return k.$dialogs[e]?(f(e),!1):void b(e)}function v(e){k.$tabs[e]=o(M(e)),k.$tabs_container.appendChild(k.$tabs[e]),k.$tmp_tabs=k.$tabs_container.querySelectorAll("a")}function h(e){var t=o(L());t.addEventListener("click",y),k.$tabs[e].appendChild(t)}function $(e,t){k.$dialogs[e]=o(T(e,t)),k.$dialogs_container.appendChild(k.$dialogs[e])}function b(e){function t(t){"success"===t.status?(N.userdata[e]={avatar:t.avatar,name:t.name,url:t.url},r(t.status,t.msg,3),v(e),h(e),t.histories?$(e,x(t.histories)):$(e,S(e,N.lang.M05.replace("%name%",N.userdata[e].name))),k.$current_tab=k.$tabs[e],k.tab_count++,l(e),f(e),k.$dialogs[e].addEventListener("submit",w)):"error"===t.status?(r(t.status,t.msg,3),k.$dialog_new_uid.select()):(r("error",t),k.$dialog_new_uid.select())}r("loading",N.lang.M01);var n=new XMLHttpRequest;n.open("get",N.process_url+"&type=get-userdata&uid="+e+"&theme-nonce="+window.DYNAMIC_REQUEST["theme-nonce"]),n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var e;try{e=JSON.parse(n.responseText)}catch(a){e=n.responseText}t(e)}else fail()},n.onerror=function(){r("error",N.lang.E01),k.$dialog_new_uid.select()}}function w(e){function t(e){e.status&&"success"===e.status?(r(e.status,e.msg,3),C(N.uid)):e.status&&"error"===e.status?r(e.status,e.msg,5):r("error",e),m(N.uid),a.removeAttribute("disabled")}function n(){r("error",N.lang.E01),m(N.uid),a.removeAttribute("disabled")}e.preventDefault();var a=k.$dialogs[N.uid].querySelector('button[type="submit"]');a.setAttribute("disabled",!0),r("loading",N.lang.M06);var o=new XMLHttpRequest,i=new FormData(this);i.append("type","send"),i.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),i.append("uid",N.uid),o.open("post",N.process_url),o.send(i),o.onload=function(){if(o.status>=200&&o.status<400){var e;try{e=JSON.parse(o.responseText)}catch(a){e=o.responseText}t(e)}else n()},o.onerror=n}function y(e){e.preventDefault(),e.stopPropagation();var t=this.parentNode,n=t.getAttribute("data-uid");N.uid==n&&(f("new"),k.$current_tab=k.$tabs["new"]),k.tab_count--,t.parentNode.removeChild(t),k.$dialogs[n].parentNode.removeChild(k.$dialogs[n]),delete k.$tabs[n],delete k.$dialogs[n];var a=new XMLHttpRequest,r=new FormData;a.open("post",N.process_url),r.append("uid",n),r.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),r.append("type","remove-dialog"),a.send(r)}function E(e,t){var n=e;"me"===e&&(n=N.uid);var a=k.$dialogs[n].querySelector(".pm-dialog-list");a.appendChild(o(S(e,t))),a.scrollTop=a.scrollHeight}function x(e){var t="";for(var n in e)t+=S(e[n]);return t}function M(e){return'<a id="pm-tab-'+e+'" href="javascript:;" data-uid="'+e+'" title="'+N.userdata[e].name+'"><img src="'+N.userdata[e].avatar+'" alt="avatar" class="avatar" width="24" height="24"> <span class="author">'+N.userdata[e].name+"</span></a>"}function L(){return'<b class="close">&times;</b>'}function T(e,t){return t||(t=""),'<form action="javascript:;" id="pm-dialog-'+e+'" class="pm-dialog"><div class="form-group pm-dialog-list">'+t+'</div><div class="form-group"><input type="text" id="pm-dialog-content-'+e+'" name="content" class="pm-dialog-conteng form-control" placeholder="'+N.lang.M02+'" required title="'+N.lang.M03+'"></div><div class="form-group"><button class="btn btn-success btn-block" type="submit"><i class="fa fa-check"></i>&nbsp;'+N.lang.M04+"</button></div></form>"}function S(e,t){var n=new Date,n=I(n,"yyyy/MM/dd hh:mm:ss"),a="me"===e?"me":"sender";return'<section class="pm-dialog-'+a+'"><div class="pm-dialog-bg"><h4><span class="name"><a href="'+N.userdata[e].url+'" target="_blank">'+N.userdata[e].name+'</a></span> <span class="date"> '+n+' </span></h4><div class="media-content">'+t+"</div></div></section>"}function A(){function e(e){if(e&&"success"===e.status){var t=e.pm.pm_author,n=e.pm.pm_receiver;k.timestamp=e.timestamp,t==N.my_uid&&k.$dialogs[n]?(E("me",e.pm.pm_content),C(n)):(N.userdata[t]||(N.userdata[t]={name:e.pm.pm_author_name,avatar:e.pm.pm_author_avatar,url:e.pm.url}),k.$dialogs[t]||(v(t),h(t),$(t),k.$dialogs[t].style.display="none",q(t),k.tab_count++,l(t),k.$dialogs[t].addEventListener("submit",w)),E(t,e.pm.pm_content),N.uid!=t&&q(t)),A()}else e&&"error"===e.status?"timeout"===e.code&&A():setTimeout(function(){A()},3e4)}function t(){setTimeout(function(){A()},3e4)}var n=new XMLHttpRequest;k.timestamp||(k.timestamp=window.DYNAMIC_REQUEST.theme_custom_pm.timestamp),n.open("get",N.process_url+"&"+i({type:"comet","theme-nonce":window.DYNAMIC_REQUEST["theme-nonce"],timestamp:k.timestamp})),n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var a;try{a=JSON.parse(n.responseText)}catch(r){a=n.responseText}e(a)}else t()},n.onerror=t}function q(e,t){"hide"===t?k.$tabs[e].classList.remove("new-msg"):k.$tabs[e].classList.add("new-msg")}function C(e){k.$inputs||(k.$inputs={}),k.$inputs[e]||(k.$inputs[e]=H("pm-dialog-content-"+e)),k.$inputs[e].focus(),k.$inputs[e].value=""}function I(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t}function H(e){return document.getElementById(e)}if(window.THEME_CONFIG.theme_custom_pm){var N={lang:{M01:"Loading, please wait...",M02:"Enter to send P.M.",M03:"P.M. content",M04:"Send P.M.",M05:"Hello, I am %name%, welcome to chat with me what do you want.",M06:"P.M. is sending, please wait...",E01:"Sorry, server is busy now, can not respond your request, please try again later."},uid:"new",my_uid:"",userdata:{}},k={};N=s(N,window.THEME_CONFIG.theme_custom_pm),e()}}},function(e,t,n){var a=n(1),r=n(2),o=n(3);e.exports=function(){"use strict";function e(){a(function(){return t(),c.$fm_loading?void n():!1})}function t(){return c.$fm_loading=s("fm-bomb-loading"),c.$fm_loading?(c.$fm=s("fm-bomb"),c.$attacker_points=s("bomb-attacker-points"),c.$target=s("bomb-target"),c.$target_name=s("bomb-target-name"),c.$target_points=s("bomb-target-points"),c.$target_avatar=s("bomb-target-avatar"),c.$points=document.querySelectorAll(".bomb-points"),c.$fm?(c.$submit=c.$fm.querySelector(".submit"),c.$fm_loading.parentNode.removeChild(c.$fm_loading),c.$fm.style.display="block",c.$fm.addEventListener("submit",i),c.$target.addEventListener("blur",u.bind,!0),void(""===c.$target.value.trim()||isNaN(c.$target.value)||u.init(c.$target.value))):!1):!1}function n(){function e(e){t(this)}function t(e){for(var t,n=e.parentNode,a=0,r=c.$points.length;r>a;a++)t=c.$points[a].parentNode,t.classList.contains("label-success")&&t.classList.remove("label-success");n.classList.add("label-success"),c.points=parseInt(e.value)}for(var n=0,a=c.$points.length;a>n;n++)c.$points[n].checked&&t(c.$points[n]),c.$points[n].addEventListener("change",e)}function i(e){e.preventDefault(),o("loading",l.lang.M02),c.$submit.setAttribute("disabled",!0);var t=new XMLHttpRequest,n=new FormData(c.$fm);n.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),t.open("POST",l.process_url),t.send(n),t.onload=function(){var e;try{e=JSON.parse(t.responseText)}catch(n){e=t.responseText}if(e&&"success"===e.status){var a=parseInt(c.$attacker_points.textContent.trim()),r=parseInt(c.$target_points.textContent.trim());if(e.hit)o(e.status,e.msg),c.$attacker_points.innerHTML=a+'<span class="text-success">+'+c.points+"</span>",setTimeout(function(){c.$attacker_points.innerHTML=a+c.points},3e3),c.$target_points.innerHTML=r+'<span class="text-danger">-'+c.points+"</span>",setTimeout(function(){c.$target_points.innerHTML=r-c.points},3e3);else{o("warning",e.msg);var i=Math.round(c.points/2);c.$attacker_points.innerHTML=a+'<span class="text-danger">-'+c.points+"</span>",setTimeout(function(){c.$attacker_points.innerHTML=a-c.points},3e3),c.$target_points.innerHTML=r+'<span class="text-success">+'+i+"</span>",setTimeout(function(){c.$target_points.innerHTML=r+i},3e3)}}else e&&"error"===e.status?o(e.status,e.msg):o("error",window.THEME_CONFIG.lang.E01);c.$submit.removeAttribute("disabled")},t.onerror=function(){o("error",window.THEME_CONFIG.lang.E01),c.$submit.removeAttribute("disabled")}}function s(e){return document.getElementById(e)}if(window.THEME_CONFIG.theme_custom_point_bomb){var c={},l={process_url:"",lang:{M01:"Target locking...",M02:"Bombing, please wait..."}};l=r(l,window.THEME_CONFIG.theme_custom_point_bomb);var u={bind:function(){return c.target_id=c.$target.value.trim(),""===c.target_id||isNaN(c.target_id)?!1:void u.init(c.target_id)},init:function(e){this.get_target_form_cache(e)?this.set_target(e):this.get_target_form_server(e)},get_target_form_server:function(e){var t=this,n=new XMLHttpRequest;o("loading",l.lang.M01),n.open("GET",l.process_url+"&type=get-target&target="+e+"&theme-nonce="+window.DYNAMIC_REQUEST["theme-nonce"]),
n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var a;try{a=JSON.parse(n.responseText)}catch(r){a=n.responseText}a&&"success"===a.status?(t.set_target_cache(e,{name:a.name,points:a.points,avatar:a.avatar}),t.set_target(e),o(a.status,a.msg),c.$submit.removeAttribute("disabled")):a&&"error"===a.status?(c.$target.select(),o(a.status,a.msg)):(o("error",a),c.$target.select())}else o("error",window.THEME_CONFIG.lang.E01)},n.onerror=function(){o("error",window.THEME_CONFIG.lang.E01)}},set_target:function(e){c.$target_points.innerHTML=c.users[e].points,c.$target_name.innerHTML=c.users[e].name,c.$target_avatar.src=c.users[e].avatar},get_target_form_cache:function(e){return c.users&&c.users[e]},set_target_cache:function(e,t){c.users||(c.users=[]),c.users[e]=t}};e()}}},,function(e,t,n){var a=n(1),r=n(3),o=n(2),i=n(10);e.exports=function(){"use strict";function e(){return c.$hgihlight_point=s("modify-count"),c.$hgihlight_point?(c.$point_count=s("point-count"),c.$fm=s("fm-lottery"),c.$fm?void t():!1):!1}function t(){function e(e){"warning"===e.status&&r(e.status,e.msg),"error"!==e.status&&n(parseInt(e["new-points"])-parseInt(c.$point_count.innerHTML))}function t(){c.$fm.querySelector(".submit").removeAttribute("disabled")}var a=new i;a.process_url=l.process_url,a.loading_tx=l.lang.M01,a.error_tx=window.THEME_CONFIG.lang.E01,a.$fm=c.$fm,a.done=e,a.always=t,a.init()}function n(e){e>0?(c.$hgihlight_point.classList.add("plus"),c.$hgihlight_point.innerHTML="+"+e):(c.$hgihlight_point.classList.add("mins"),c.$hgihlight_point.innerHTML=e),c.$hgihlight_point.style.display="inline",setTimeout(function(){c.$hgihlight_point.classList.remove("plus"),c.$hgihlight_point.classList.remove("mins"),c.$hgihlight_point.style.display="none",c.$point_count.innerHTML=parseInt(c.$point_count.innerHTML)+e},2e3)}function s(e){return document.getElementById(e)}if(window.THEME_CONFIG.theme_point_lottery){var c={},l={process_url:"",lang:{M01:"Results coming soon..."}};l=o(l,window.THEME_CONFIG.theme_point_lottery),a(e)}}},,,,,function(e,t,n){var a=n(1),r=n(3),o=n(2);e.exports=function(){"use strict";function e(){a(n)}function t(e){return document.getElementById(e)}function n(){s.$fm=t("fm-change-avatar"),s.$fm&&(s.$crop_container=t("cropper-container"),s.$avatar_preview=t("avatar-preview"),s.$crop_done_btn=t("cropper-done-btn"),s.$base64=t("avatar-base64"),i())}function i(){function e(e){e.stopPropagation(),e.preventDefault(),s.files=e.target.files.length?e.target.files:e.originalEvent.dataTransfer.files,s.file=s.files[0],n(s.file)}function n(e){var t=new FileReader;t.onload=function(n){return-1===e.type.indexOf("image")?(alert("Invaild file type."),!1):(s.$crop_container.innerHTML='<img src="'+t.result+'" alt="cropper">',s.$crop_container.style.display="block",s.$crop_img=s.$crop_container.querySelector("img"),s.$avatar_preview.style.display="block",s.cp=new Cropper(s.$crop_img,{aspectRatio:1,preview:"#avatar-preview",minCropBoxWidth:150,minCropBoxHeight:150}),void(s.$crop_done_btn.style.display="block"))},t.readAsDataURL(e)}function a(){var e=new XMLHttpRequest,t=new FormData,n=s.$fm.querySelector("[type=submit]");r("loading",window.THEME_CONFIG.lang.M01),n.setAttribute("disabled",!0),t.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),t.append("type","avatar"),t.append("b4",s.cp.getCroppedCanvas().toDataURL("image/jpeg",.75)),e.open("POST",c.process_url),e.send(t),e.onload=function(){if(e.status>=200&&e.status<400){var t;try{t=JSON.parse(e.responseText)}catch(a){t=e.responseText}t&&"success"===t.status?(r(t.status,t.msg),location.reload()):t&&"error"===t.status?(r(t.status,t.msg),n.removeAttribute("disabled")):(r("error",window.THEME_CONFIG.lang.E01),n.removeAttribute("disabled"))}else r("error",window.THEME_CONFIG.lang.E01),n.removeAttribute("disabled")},e.onerror=function(){r("error",window.THEME_CONFIG.lang.E01),n.removeAttribute("disabled")}}s.$file=t("file"),s.$file.addEventListener("drop",e,!1),s.$file.addEventListener("change",e,!1),s.$fm.addEventListener("submit",a,!1)}if(window.THEME_CONFIG.theme_custom_user_settings){var s={},c={process_url:""};c=o(c,window.THEME_CONFIG.theme_custom_user_settings),e()}}},function(e,t,n){var a=n(1),r=n(10),o=n(2);e.exports=function(){"use strict";function e(){a(t)}function t(){i.$fm=document.querySelector(".user-form"),i.$fm&&n(i.$fm)}function n(e){var t=new r;t.process_url=s.process_url,t.loading_tx=window.THEME_CONFIG.lang.M01,t.error_tx=window.THEME_CONFIG.lang.E01,t.$fm=e,t.init()}if(window.THEME_CONFIG.theme_custom_user_settings){var i={},s={process_url:""};s=o(s,window.THEME_CONFIG.theme_custom_user_settings),e()}}},,,,function(e,t){e.exports=function(e,t,n){for(var a,r=0,o=t.length;o>r;r++)a=new RegExp(t[r],"g"),e=e.replace(a,n[r]);return e}},,,,function(e,t){e.exports=function(){var e=arguments;return arguments[0].replace(/\{(\d+)\}/g,function(t,n){return e[parseInt(n)+1]})}}]);